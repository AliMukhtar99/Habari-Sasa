[{"/home/ali/Habari-Sasa/src/index.js":"1","/home/ali/Habari-Sasa/src/App.js":"2","/home/ali/Habari-Sasa/src/reportWebVitals.js":"3","/home/ali/Habari-Sasa/src/components/Navbar.js":"4","/home/ali/Habari-Sasa/src/components/News.js":"5","/home/ali/Habari-Sasa/src/components/NewsItem.js":"6","/home/ali/Habari-Sasa/src/components/Spinner.js":"7"},{"size":500,"mtime":1642581512000,"results":"8","hashOfConfig":"9"},{"size":3454,"mtime":1665132536260,"results":"10","hashOfConfig":"9"},{"size":362,"mtime":1642581512000,"results":"11","hashOfConfig":"9"},{"size":3138,"mtime":1665137748303,"results":"12","hashOfConfig":"9"},{"size":4231,"mtime":1665133224895,"results":"13","hashOfConfig":"9"},{"size":1158,"mtime":1642581512000,"results":"14","hashOfConfig":"9"},{"size":236,"mtime":1642581512000,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"azgb9l",{"filePath":"18","messages":"19","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"20","messages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"22","messages":"23","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"24","messages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26"},{"filePath":"27","messages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/ali/Habari-Sasa/src/index.js",[],"/home/ali/Habari-Sasa/src/App.js",[],"/home/ali/Habari-Sasa/src/reportWebVitals.js",[],"/home/ali/Habari-Sasa/src/components/Navbar.js",[],"/home/ali/Habari-Sasa/src/components/News.js",["31"],"import React, { useEffect, useState } from \"react\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst News = (props) => {\r\n  const [articles, setArticles] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [totalResults, setTotalResults] = useState(0);\r\n\r\n  if (props.category !== \"general\") {\r\n    document.title = `Habari Sasa - ${props.category}`;\r\n  } else {\r\n    document.title = `Habari Sasa - Home`;\r\n  }\r\n\r\n  const updateNews = async () => {\r\n    props.setProgress(10);\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.apiKey}&page=${page}&pageSize=${props.pageSize}`;\r\n    setLoading(true);\r\n    let data = await fetch(url);\r\n    props.setProgress(30);\r\n    let parsedData = await data.json();\r\n    props.setProgress(50);\r\n    props.setProgress(100);\r\n    console.log(parsedData);\r\n    setArticles(parsedData.articles);\r\n    setLoading(false);\r\n    setTotalResults(parsedData.totalResults);\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateNews();\r\n  }, []);\r\n\r\n  const fetchMoreData = async () => {\r\n    const url = `https://newsapi.org/v2/top-headlines?country=${\r\n      props.country\r\n    }&category=${props.category}&apiKey=${props.apiKey}&page=${\r\n      page + 1\r\n    }&pageSize=${props.pageSize}`;\r\n    setPage(page + 1);\r\n    // setState({ loading: true });\r\n    let data = await fetch(url);\r\n\r\n    let parsedData = await data.json();\r\n    console.log(parsedData);\r\n    setArticles(articles.concat(parsedData.articles));\r\n    setTotalResults(parsedData.totalResults);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1\r\n        className=\"text-center\"\r\n        style={{ padding: \"10px\", marginTop: \"60px\" }}\r\n      >\r\n        Headlines\r\n      </h1>\r\n      {loading && <Spinner />}\r\n\r\n      <InfiniteScroll\r\n        style={{ overflow: \"\" }}\r\n        dataLength={articles.length}\r\n        next={fetchMoreData}\r\n        hasMore={articles.length !== totalResults}\r\n        loader={<Spinner />}\r\n      >\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {\r\n              //!loading &&\r\n              articles.map((element) => {\r\n                return (\r\n                  <div className=\"col-md-4\" key={element.url}>\r\n                    <NewsItem\r\n                      title={\r\n                        element.title\r\n                          ? element.title.substring(\r\n                              0,\r\n                              element.title.indexOf(\"-\")\r\n                            )\r\n                          : \"\"\r\n                      }\r\n                      description={\r\n                        element.description\r\n                          ? element.description.slice(0, 100)\r\n                          : \"\"\r\n                      }\r\n                      newsUrl={element.url}\r\n                      imageUrl={element.urlToImage}\r\n                      author={element.author}\r\n                      publishedAt={element.publishedAt}\r\n                      source={element.source.name}\r\n                    />\r\n                  </div>\r\n                );\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n      </InfiniteScroll>\r\n      <div className=\"container d-flex justify-content-between\">\r\n        {/* <button\r\n            disabled={page <= 1}\r\n            type=\"button\"\r\n            className=\"btn btn-primary \"\r\n            onClick={handlePreviousClick}\r\n          >\r\n            &lArr; Previous\r\n          </button> */}\r\n        {/* <button\r\n            disabled={\r\n              page + 1 >\r\n              Math.ceil(totalResults / props.pageSize)\r\n            }\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={handleNextClick}\r\n          >\r\n            Next &rArr;\r\n          </button> */}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nNews.propTypes = {\r\n  country: PropTypes.string,\r\n  pageSize: PropTypes.number,\r\n  category: PropTypes.string,\r\n};\r\n\r\nNews.defaultProps = {\r\n  country: \"in\",\r\n  pageSize: 5,\r\n  category: \"general\",\r\n};\r\nexport default News;\r\n","/home/ali/Habari-Sasa/src/components/NewsItem.js",[],"/home/ali/Habari-Sasa/src/components/Spinner.js",[],{"ruleId":"32","severity":1,"message":"33","line":36,"column":6,"nodeType":"34","endLine":36,"endColumn":8,"suggestions":"35"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'updateNews'. Either include it or remove the dependency array.","ArrayExpression",["36"],{"desc":"37","fix":"38"},"Update the dependencies array to be: [updateNews]",{"range":"39","text":"40"},[1220,1222],"[updateNews]"]